  CREATE TABLE "KPI_1" 
   (	"KPI_1_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ANIO" VARCHAR2(20), 
	"TOTAL_REGISTROS" NUMBER, 
	 CONSTRAINT "KPI_1_PK" PRIMARY KEY ("KPI_1_ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "UNIQUE_ANIO" UNIQUE ("ANIO")
  USING INDEX  ENABLE
   ) ;

-- Crear tabla KPI_2 para análisis de ventas
CREATE TABLE KPI_2 (
    KPI_2_ID NUMBER PRIMARY KEY,
    PERIODO VARCHAR2(20),
    TIPO_PERIODO VARCHAR2(10), -- 'MENSUAL' o 'ANUAL'
    TOTAL_VENTAS NUMBER(16,2),
    TOTAL_SIN_IVA NUMBER(16,2),
    VALOR_IVA NUMBER(16,2),
    CANTIDAD_VENTAS NUMBER,
    VARIACION_PORCENTAJE NUMBER(10,2),
    TENDENCIA VARCHAR2(15),
    FECHA_ACTUALIZACION DATE
);

-- Crear tabla KPI_3 para moda y promedios de compra
CREATE TABLE KPI_3 (
    KPI_3_ID NUMBER PRIMARY KEY,
    PERIODO VARCHAR2(20),
    TIPO_PERIODO VARCHAR2(10), -- 'MENSUAL' o 'ANUAL'
    VALOR_MODAL NUMBER(16,2), -- Valor que más se repite
    PROMEDIO_COMPRA NUMBER(16,2),
    MEDIANA_COMPRA NUMBER(16,2),
    CANTIDAD_COMPRAS NUMBER,
    RANGO_MODAL VARCHAR2(50), -- Rango donde está la moda
    VARIACION_PROMEDIO NUMBER(10,2), -- Variación del promedio vs período anterior
    TENDENCIA_PROMEDIO VARCHAR2(15),
    FECHA_ACTUALIZACION DATE
);

-- Crear tabla KPI_4 para stock por categoría
CREATE TABLE KPI_4 (
    KPI_4_ID NUMBER PRIMARY KEY,
    CATEGORIA VARCHAR2(50),
    STOCK_ACTUAL NUMBER,
    STOCK_ANTERIOR NUMBER,
    VARIACION_STOCK NUMBER,
    VARIACION_PORCENTAJE NUMBER(10,2),
    ESTADO_STOCK VARCHAR2(20), -- 'NORMAL', 'BAJO', 'CRÍTICO', 'AGOTADO'
    UMBRAL_MINIMO NUMBER,
    PRODUCTOS_BAJO_STOCK NUMBER,
    TOTAL_PRODUCTOS NUMBER,
    FECHA_ACTUALIZACION DATE
);

-- Crear tabla KPI_5 para tasa de entregas exitosas
CREATE TABLE KPI_5 (
    KPI_5_ID NUMBER PRIMARY KEY,
    PERIODO VARCHAR2(20),
    TIPO_PERIODO VARCHAR2(10), -- 'MENSUAL' o 'ANUAL'
    TOTAL_ENTREGAS NUMBER,
    ENTREGAS_EXITOSAS NUMBER,
    ENTREGAS_FALLIDAS NUMBER,
    TASA_EXITOSAS NUMBER(10,4), -- Porcentaje de entregas exitosas
    TASA_ANTERIOR NUMBER(10,4), -- Tasa del período anterior
    VARIACION_TASA NUMBER(10,4), -- Variación porcentual
    TENDENCIA VARCHAR2(15), -- 'MEJORA', 'ESTABLE', 'DISMINUYE', 'FUERTE DISMINUCIÓN'
    MES_ALERTA VARCHAR2(3), -- 'SI' o 'NO' para meses con tasa muy baja
    FECHA_ACTUALIZACION DATE
);

-- Crear tabla KPI_6 para clientes recurrentes
CREATE TABLE KPI_6 (
    KPI_6_ID NUMBER PRIMARY KEY,
    ANIO VARCHAR2(4),
    TOTAL_CLIENTES NUMBER,
    CLIENTES_RECURRENTES NUMBER,
    CLIENTES_NUEVOS NUMBER,
    CLIENTES_UNICOS NUMBER, -- Solo una compra en el año
    TASA_RECURRENCIA NUMBER(10,4), -- Porcentaje de clientes recurrentes
    TASA_ANTERIOR NUMBER(10,4), -- Tasa del año anterior
    VARIACION_TASA NUMBER(10,4), -- Variación porcentual de la tasa
    TENDENCIA VARCHAR2(15), -- 'AUMENTO', 'DISMINUYE', 'ESTABLE'
    CRECIMIENTO_CLIENTES NUMBER, -- Variación en total de clientes
    FECHA_ACTUALIZACION DATE
);

-- Crear tabla KPI_7 para tasa de conversión de carritos
CREATE TABLE KPI_7 (
    KPI_7_ID NUMBER PRIMARY KEY,
    PERIODO VARCHAR2(20),
    TIPO_PERIODO VARCHAR2(10), -- 'MENSUAL' o 'ANUAL'
    TOTAL_CARRITOS NUMBER,
    CARRITOS_CONVERTIDOS NUMBER,
    CARRITOS_ABANDONADOS NUMBER,
    TASA_CONVERSION NUMBER(10,4), -- Porcentaje de carritos que se convierten en compras
    TASA_ABANDONO NUMBER(10,4), -- Porcentaje de carritos abandonados
    TASA_CONVERSION_ANTERIOR NUMBER(10,4), -- Tasa del período anterior
    VARIACION_TASA NUMBER(10,4), -- Variación porcentual
    TENDENCIA VARCHAR2(15), -- 'MEJORA', 'ESTABLE', 'DISMINUYE'
    ALERTA_ABANDONO VARCHAR2(3), -- 'SI' o 'NO' para tasas > 30%
    VENTAS_PERDIDAS_ESTIMADAS NUMBER(16,2), -- Valor estimado de ventas perdidas
    FECHA_ACTUALIZACION DATE
);
